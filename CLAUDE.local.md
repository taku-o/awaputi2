# 設計ルール

## 要件定義・設計時のルール
* ドキュメントにない余計な機能は作らない、記載してもならない。
* 将来導入予定の機能、拡張予定の機能は考慮してはなりません。
* 最適化も不要です。
* フォールバック機能は不要。
* 利用できるライブラリがあるなら利用する想定で良い。

# 開発ルール

## 開発時の作業の進め方のルール
* ドキュメントにない余計な機能は作らない。
* 将来導入予定の機能、拡張予定の機能は考慮してはならない。
* 最適化も不要。
* フォールバック機能は不要。

* ユーザーの許可なく、完了やcomplete、それに属するという文字を使ってはいけない、書き込んでもいけない。タスクリストに完了のチェックもつけてはいけない。部分完了や、一部完了なども不可である。実質完了という表現も不可です。タスクの完了判定はユーザーが行います。
* 作業が100%完了時に完了と見なします。それまではユーザーに完了判定を求めてはいけません。テストコードや重要度の低いコードであっても、それが完了していなければ完了と判断してはいけません。
* 一時的な実装、仮実装、ダミーの値を返す実装を作成した時、それを実装したと見なしてはいけない。将来実装する、現時点では未実装、あたりも同様。
* デバッグ時以外に、一時的な実装の置き換えをしてはいけません。
* 処理件数が多くても、スクリプトを作成して一括処理をしてはならない。sedなどで一括変換してもならない。ユーザーに許可を得た場合のみ利用可とする。実行後には処理件数が多くても、処理の結果を確認すること。
* 動作確認でエラーが発生した場合、それが理由があることでも動作確認OKとはしません。ユーザーにエラーの理由を説明してください。
* 問題が発生したときに、コメントアウトする、削除する、無視するなどの対応を行ってはいけません。それを対応と見なしません。
* 設計通りに実装が進まなかった場合は実装を変更したりしないで、ユーザーに報告してください。設計者に連絡を取る必要がある。
* ユーザーの許可なく、テストコードを変更してはならない。テストコードを修正したい時はユーザーに修正内容の許可を必ず取ること。

## 開発完了受け入れ時のルール
* tasks.mdに記載されている要件定義書の受け入れ基準を確認して漏れている作業がないか確認してください。
* 実装が完了したら、その実装がdocs/design、docs/planningのドキュメントに反していないか慎重に検証する。
* テストできる機能については単体テストを用意する。
* 画面描画のある機能についてはPlaywrightを用いた単体テストを用意する。
* 他の既存テストが全て失敗しないことを確認する。
* 目視で確認できる修正に関しては、ユーザーがその修正内容を確認出来るようにする。

* 各種テストを実行してエラーがおきないことを確認してください。
```
npm run test:e2e
npm run test:storybook:all -- --reporter=line
cd ui-library && npm run type-check && npm run lint && npm run build && npm test
```

## e2eテスト時のルール
1. 開発開始時：既存の3000番ポートをチェック&クリーンアップ
2. 単一bubblepopサーバーをport 3000で起動
3. ui-libraryは別途ビルドモードで動作
4. E2Eテストは常にlocalhost:3000を使用

# その他
* ドキュメントは日本語で書いてください。
* GitHub CLIが使用できます。
