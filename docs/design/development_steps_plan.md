# BubblePop 開発手順

## Phase 1: 基盤構築
1. モノリポジトリのセットアップ（lerna設定）
2. 基本パッケージ構造の作成
3. TypeScript、ESLint、Prettier設定
4. Viteビルド設定

## Phase 2: UIライブラリ構築
1. ui-libraryパッケージの作成
2. MUIテーマ設定

## Phase 3: 基本コンポーネント作成
1. Buttonコンポーネント実装
2. Cardコンポーネント実装
3. Containerコンポーネント実装

## Phase 4: Storybookセットアップ
1. Storybook初期設定
2. アドオン設定
3. ビルド設定

## Phase 5: 最小限のコンポーネントストーリー作成
1. Buttonストーリー作成
2. Cardストーリー作成
3. Containerストーリー作成

## Phase 6: データ構造とストア
1. 型定義ファイルの作成
2. Zustandストアの基本構造作成
3. ユーザーデータストア実装
4. ローカルストレージ保存機能

## Phase 7: ページルーティング
1. React Routerセットアップ
2. ページコンポーネントの空実装
3. ページ遷移の確認

## Phase 8: デバッグアプリ基盤構築
1. デバッグ用トップページ実装
2. 各デバッグアプリのルーティング設定

## Phase 9: Playwrightテスト基盤構築
1. Playwright設定ファイル作成
2. テストヘルパー関数実装
3. ページオブジェクトモデル基盤
4. テスト実行スクリプト設定

## Phase 10: タイトル画面用コンポーネント作成
1. GameTitleコンポーネント実装
2. TextInputコンポーネント実装
3. GameStartButtonコンポーネント実装
4. AnimatedBubbleBackgroundコンポーネント実装
5. Storybookストーリー作成

## Phase 11: タイトル画面
1. タイトルページレイアウト実装
2. ユーザー名入力フォーム
3. ゲーム開始ボタン

## Phase 12: タイトル画面テスト
1. タイトル画面表示単体テスト作成
2. ユーザー名入力単体テスト作成
3. ゲーム開始遷移単体テスト作成

## Phase 13: メイン画面用コンポーネント作成
1. UserInfo、LevelDisplayコンポーネント実装
2. APDisplay、TAPDisplayコンポーネント実装
3. StageCard、StageListコンポーネント実装
4. MainNavigationコンポーネント実装
5. Storybookストーリー作成

## Phase 14: メイン画面
1. メインページレイアウト実装
2. ユーザー情報表示（レベル、AP、TAP）
3. ステージ選択カード表示
4. ナビゲーションボタン配置

## Phase 15: メイン画面テスト
1. メイン画面表示単体テスト作成
2. ユーザー情報表示単体テスト作成
3. ステージ選択動作単体テスト作成
4. ナビゲーション遷移単体テスト作成

## Phase 16: ゲームプレイ画面デバッグアプリ
1. bubblepop-debug-gameパッケージ作成
2. デバッグ用ゲーム画面ルーティング

## Phase 17: ゲームプレイ画面用コンポーネント作成
1. GameHeader、GameInfoPanelコンポーネント実装
2. HPBar、ScoreDisplayコンポーネント実装
3. ComboDisplay、TimerDisplayコンポーネント実装
4. GiveUpButton、PhaserContainerコンポーネント実装
5. Storybookストーリー作成

## Phase 18: ゲームプレイ画面（静的版）
1. ゲームプレイページレイアウト
2. HP、スコア、タイマー表示
3. Phaserコンテナ配置（空の状態）
4. ギブアップボタン実装

## Phase 19: ゲームプレイ画面テスト
1. ゲーム画面表示単体テスト作成
2. UI要素配置単体テスト作成
3. ギブアップボタン動作単体テスト作成

## Phase 20: ショップ画面デバッグアプリ
1. bubblepop-debug-shopパッケージ作成
2. デバッグ用ショップ画面ルーティング

## Phase 21: ショップ画面用コンポーネント作成
1. ShopHeaderコンポーネント実装
2. ItemCard、ItemListコンポーネント実装
3. PurchaseButtonコンポーネント実装
4. ItemDetailDialog、PurchaseResultDialogコンポーネント実装
5. Storybookストーリー作成

## Phase 22: ショップ画面
1. ショップページレイアウト
2. アイテムリスト表示
3. 購入ダイアログ
4. AP残高チェック

## Phase 23: ショップ画面テスト
1. ショップ画面表示単体テスト作成
2. アイテムリスト表示単体テスト作成
3. 購入ダイアログ動作単体テスト作成

## Phase 24: 設定画面デバッグアプリ
1. bubblepop-debug-settingsパッケージ作成
2. デバッグ用設定画面ルーティング

## Phase 25: 設定画面用コンポーネント作成
1. SettingsSectionコンポーネント実装
2. SliderInput（音量用）コンポーネント実装
3. ToggleSwitch、SelectDropdownコンポーネント実装
4. SaveButton、ResetButtonコンポーネント実装
5. Storybookストーリー作成

## Phase 26: 設定画面
1. 設定ページ実装

## Phase 27: 設定画面テスト
1. 設定画面表示単体テスト作成
2. 設定項目初期値単体テスト作成

## Phase 28: ヘルプ画面デバッグアプリ
1. bubblepop-debug-helpパッケージ作成
2. デバッグ用ヘルプ画面ルーティング

## Phase 29: ヘルプ画面用コンポーネント作成
1. HelpNavigationコンポーネント実装
2. HelpContentコンポーネント実装
3. BubbleTypeCardコンポーネント実装
4. BackButtonコンポーネント実装
5. Storybookストーリー作成

## Phase 30: ヘルプ画面
1. ヘルプページレイアウト
2. ゲームルール説明
3. 泡タイプ一覧
4. 操作方法説明

## Phase 31: ヘルプ画面テスト
1. ヘルプ画面表示単体テスト作成
2. コンテンツ表示単体テスト作成
3. ナビゲーション動作単体テスト作成

## Phase 32: アカウント画面デバッグアプリ
1. bubblepop-debug-accountパッケージ作成
2. デバッグ用アカウント画面ルーティング

## Phase 33: アカウント画面用コンポーネント作成
1. AccountSummaryコンポーネント実装
2. StatisticCard、StatisticListコンポーネント実装
3. AchievementCard、AchievementListコンポーネント実装
4. ProgressBarコンポーネント実装
5. Storybookストーリー作成

## Phase 34: アカウント画面
1. アカウントページ実装
2. プレイ統計表示
3. 実績リスト表示（基本版）
4. 所持アイテム一覧

## Phase 35: アカウント画面テスト
1. アカウント画面表示単体テスト作成
2. 統計情報表示単体テスト作成
3. 実績リスト表示単体テスト作成

## Phase 36: キーボードイベント管理システム実装
1. グローバルキーボードイベントリスナー作成
2. キーイベントの優先度管理システム
3. キーイベントの競合回避システム
4. キーイベントのデバッグログ機能

## Phase 37: 基本ショートカットキー実装
1. F1キー: ヘルプ画面表示
2. Escapeキー: 一時停止・キャンセル・ダイアログ閉じる
3. Enterキー: 確認・選択・ダイアログ決定
4. キーイベントの適切な画面別制御

## Phase 38: ナビゲーション用矢印キー実装
1. ショップ画面: ↑↓キーでアイテム選択移動
2. メニュー画面: ↑↓キーでメニュー項目移動
3. フォーカス管理システム実装
4. フォーカス表示の視覚的フィードバック

## Phase 39: キーボード操作制限システム実装
1. 許可されたキーのみの処理
2. 禁止キーの無効化処理
3. キーボード操作の有効/無効切り替え
4. 設定画面でのキーボード操作設定

## Phase 40: フォーカス管理システム実装
1. FocusIndicatorコンポーネント実装
2. フォーカス可能要素の管理
3. フォーカス移動のアニメーション
4. フォーカス状態の永続化

## Phase 41: ショートカットキーテスト
1. キーボードイベント単体テスト作成
2. ショートカットキー動作単体テスト作成
3. フォーカス管理単体テスト作成
4. キーボード操作制限単体テスト作成

## Phase 42: タイトル画面アニメーション
1. Framer Motion導入
2. ロゴアニメーション
3. ボタンホバーエフェクト
4. ページ遷移アニメーション

## Phase 43: Phaserゲームエンジン導入
1. Phaserライブラリ導入
2. Phaserシーン構造作成
3. ゲームコンテナ接続
4. 基本的な描画テスト

## Phase 44: 泡の基本実装
1. 基本的な泡の表示（1種類）
2. クリックで泡を消す機能
3. 泡の動き実装
4. 泡の生成システム

## Phase 45: ハンマーカーソルコンポーネント実装
1. ハンマーアイコンの表示（32x32px）
2. カーソル状態管理（idle、swinging、hitting）
3. CSS cursorプロパティの動的変更
4. ハンマーカーソルコンポーネントテスト

## Phase 46: カーソル状態管理システム
1. ゲームプレイ中のカーソル自動切り替え
2. メニュー画面での通常カーソル復帰
3. カーソル状態の永続化
4. カーソル状態管理テスト

## Phase 47: ハンマーカーソルアニメーション
1. idle状態での微細な動き（呼吸アニメーション）
2. swinging状態での回転アニメーション
3. hitting状態での衝撃エフェクト
4. ハンマーカーソルアニメーションテスト

## Phase 48: 3段階クリックアニメーションシステム
1. 振りかぶり段階（0-150ms）: 回転-45度、スケール1.2倍
2. 叩き段階（150-250ms）: 回転15度、スケール0.9倍
3. 復帰段階（250ms以降）: 元の状態に復帰
4. クリックアニメーション段階テスト

## Phase 49: アニメーションタイミング制御
1. クリックイベントの検知とタイミング管理
2. アニメーション状態の管理
3. 複数クリック時の重複防止
4. タイミング制御テスト

## Phase 50: 衝撃遅延システム
1. クリックから200ms後の衝撃発生
2. 遅延タイマーの管理
3. 衝撃タイミングの可視化
4. 衝撃遅延システムテスト

## Phase 51: 軌跡エフェクト実装
1. ハンマーの軌跡パーティクル生成
2. 軌跡の視覚的表現（光の軌跡）
3. 軌跡の持続時間とフェードアウト
4. 軌跡エフェクトテスト

## Phase 52: 衝撃波エフェクト実装
1. 泡を割った時の衝撃波生成
2. 衝撃波の拡散アニメーション
3. 泡の種類による衝撃波の強度調整
4. 衝撃波エフェクトテスト

## Phase 53: 画面シェイク効果実装
1. 泡を割った時の画面振動
2. 強度: 泡の種類により0.1～0.8
3. 持続時間: 100ms
4. シェイク方向のランダム化

## Phase 54: エフェクトタイミング制御システム
1. エフェクトの発生タイミング管理
2. エフェクトの重複制御
3. パフォーマンス最適化（エフェクト数の制限）
4. エフェクトタイミング制御テスト

## Phase 55: スコア・HP管理
1. スコア計算システム
2. HP管理システム
3. ダメージ処理
4. 回復処理

## Phase 56: タイマー・ゲーム終了
1. タイマー機能
2. カウントダウン表示
3. ゲーム終了判定
4. ゲームオーバー処理

## Phase 57: リザルト画面用コンポーネント作成
1. ResultSummaryコンポーネント実装
2. PlayAgainButtonコンポーネント実装
3. MenuReturnButtonコンポーネント実装
4. ExperienceGainコンポーネント実装
5. Storybookストーリー作成

## Phase 58: リザルト画面
1. プレイ結果ページ実装
2. スコア、獲得AP表示
3. もう一度プレイボタン
4. メニューに戻るボタン

## Phase 59: データ永続化
1. プレイ結果の保存
2. ハイスコア更新
3. 累計AP、TAP計算
4. ユーザーレベル計算

## Phase 60: ステージ定義
1. 複数ステージの定義
2. ステージ別の泡出現パターン
3. 難易度設定
4. ステージ情報表示

## Phase 61: ステージ解放システム
1. ステージ解放条件チェック
2. TAP要求チェック
3. 解放通知表示
4. ステージ選択制限

## Phase 62: 複数の泡タイプ
1. 泡タイプ定義の実装
2. 通常泡、石泡の追加
3. 特殊効果泡（ピンク、虹）の追加
4. 泡ごとの視覚効果

## Phase 63: コンボシステム
1. コンボカウント実装
2. コンボ倍率計算
3. コンボ表示UI
4. コンボ時間管理

## Phase 64: アイテム定義・効果
1. アイテム定義作成
2. アイテム効果の実装
3. ゲームプレイへの効果適用
4. 効果の視覚表現

## Phase 65: アイテム購入・管理
1. アイテムレベル管理
2. アイテム購入処理
3. AP消費チェック
4. 購入履歴保存

## Phase 66: 音量調整機能
1. マスター音量スライダー
2. BGM音量スライダー
3. 効果音音量スライダー
4. ミュートボタン

## Phase 67: グラフィック品質設定
1. 品質選択（自動/低/中/高/最高）
2. パーティクルエフェクト設定
3. 画面シェイク設定
4. ダメージ数値表示設定

## Phase 68: 言語切り替え
1. 言語選択UI
2. 日本語・英語で動作確認
3. 設定の保存

## Phase 69: 音響システム基盤
1. Phaser音響システム実装
2. オーディオマネージャー作成
3. 音量設定の反映
4. ミュート機能

## Phase 70: BGM・効果音実装
1. BGMファイル読み込み
2. BGM再生・ループ
3. 効果音ファイル読み込み
4. 効果音再生処理

## Phase 71: 実績定義・データ
1. 実績定義の実装
2. 実績データ構造
3. 実績カテゴリ分類
4. 実績ティアシステム

## Phase 72: 実績進行・通知
1. 実績進行チェック
2. 実績達成判定
3. 実績達成通知
4. AP報酬付与

## Phase 73: 硬い泡タイプ追加
1. 鉄泡実装（HP3）
2. ダイヤモンド泡実装（HP4）
3. HP表示システム実装
4. 段階的ダメージエフェクト

## Phase 74: 基本特殊効果泡追加
1. 毒泡実装（ダメージ効果）
2. 時計泡実装（時間停止効果）
3. スコア泡実装（高得点・倍率効果）
4. 特殊効果の視覚表現

## Phase 75: 危険泡タイプ追加
1. トゲ泡実装（硬い＋ダメージ）
2. 電気泡実装（連鎖効果）
3. 逃げる泡実装（高速移動）
4. ひび泡実装（時限爆弾）

## Phase 76: 高難易度泡追加（前半）
1. ボス泡実装（HP10・段階変化）
2. 黄金泡実装（高得点・3倍効果）
3. ボス泡専用エフェクト
4. 段階的サイズ変化システム

## Phase 77: 高難易度泡追加（後半）
1. 氷泡実装（周囲減速効果）
2. 磁石泡実装（引き寄せ効果）
3. 爆発泡実装（範囲攻撃効果）
4. 範囲効果システム実装

## Phase 78: 特別レア泡追加
1. 幻影泡実装（クリック無効化）
2. 倍率泡実装（次の泡倍率）
3. レア泡出現エフェクト
4. 特殊効果の連鎖システム

## Phase 79: 最終調整
1. UIポリッシュ