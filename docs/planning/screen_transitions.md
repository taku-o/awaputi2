# BubblePop 画面遷移図

## 画面遷移フロー概要

```
タイトル画面
    ↓ [ゲームスタート]
ゲームトップ
    ├─ [ステージ選択] → ゲームプレイ
    ├─ [設定] → 設定画面
    ├─ [ヘルプ] → ヘルプ画面
    ├─ [アカウント情報] → アカウント情報画面
    └─ [ショップ] → ショップ画面
```

## 詳細画面遷移

### 1. タイトル画面
**表示内容:**
- ゲームタイトル「BubblePop」
- 説明文「泡を割って高スコアを目指そう！」
- ゲームスタートボタン

**画面要素:**
- ゲームスタートボタン

**遷移:**
- ゲームスタート → ゲームトップ

### 2. ゲームトップ（メインメニュー）
**表示内容:**
- ゲームタイトル
- ステージリスト（利用可能なステージの概要表示）
  - 各ステージの情報 (名前、説明、解放条件)
- メニュー項目:
  - ステージ選択
  - 設定
  - ヘルプ
  - アカウント情報
  - ショップ
- プレイヤー情報（レベル、AP、TAP）

**ステージ一覧:**
1. 1分ステージ (チュートリアル)
2. 普通のアワアワ
3. ちょっと硬いアワアワ
4. かなり硬いアワアワ
5. 特殊なアワアワ
6. 悪夢のアワアワ
7. カオスなアワアワ
8. 究極のアワアワ
9. 全部入りアワアワ
10. ボスアワアワ

**技術的特徴:**
- **描画エンジン**: HTML + React
- **音響**: Phaser音響システム（BGM、効果音）

**遷移:**
- ステージ選択 → ゲームプレイ画面
- 設定 → 設定画面
- ヘルプ → ヘルプ画面
- アカウント情報 → アカウント情報画面
- ショップ → ショップ画面

### 3. ゲームプレイ画面
**表示内容:**
- ゲーム画面（Phaser描画エリア）
- UI情報:
  - スコア
  - HP
  - 残り時間
  - コンボ数

**画面要素:**
- ゲーム画面（Phaser描画）
- 成績表示（HTML + React）
- ライフ表示（HTML + React）
- 残り時間表示（HTML + React）
- コンボ数表示（HTML + React）
- ギブアップボタン（HTML + React）

**技術的特徴:**
- **描画エンジン**: Phaser（ゲーム画面のみ）
- **UI要素**: HTML + React（スコア、HP、時間などの表示）
- **音響**: Phaser音響システム（全画面共通）

**遷移:**
- ギブアップ → プレイ結果画面

### 4. プレイ結果画面
**表示内容:**
- 最終スコア
- 獲得AP
- 達成した実績

**画面要素:**
- 最終スコア
- 獲得AP
- 達成した実績

**遷移:**
- もう一度 → 同じステージのゲームプレイ画面
- メニューに戻る → ゲームトップ

### 5. 設定画面
**表示内容:**
- 音響設定（マスター音量、効果音、BGM）
- 言語設定
- 品質設定
- アクセシビリティ設定
- キーボードショートカット設定

**遷移:**
- 設定保存 → ゲームトップ
- メニューに戻る → ゲームトップ

### 6. ヘルプ画面
**表示内容:**
- ゲームの遊び方
- 泡の種類説明
- キーボードショートカット一覧
- FAQ

**遷移:**
- メニューに戻る → ゲームトップ

### 7. アカウント情報画面
**表示内容:**
- プレイヤー統計
- 実績一覧
- レベル情報
- データクリア機能

**遷移:**
- メニューに戻る → ゲームトップ

### 8. ショップ画面
**表示内容:**
- 購入可能アイテム一覧
- 各アイテムの効果と価格
- 現在のAP残高
- 総TAP

**遷移:**
- アイテム詳細 → アイテム詳細画面
- メニューに戻る → ゲームトップ

### 9. アイテム詳細画面
**表示内容:**
- アイテムの詳細情報
- 購入可能AP
- 総TAP
- 購入ボタン

**遷移:**
- 購入結果 → 購入結果画面
- 戻る → ショップ画面

### 10. 購入結果画面
**表示内容:**
- 購入完了メッセージ
- 購入したアイテムの情報
- 残高AP
- 総TAP

**遷移:**
- 戻る → ショップ画面

## 画面遷移の特徴

### シンプルな構造
- ゲームトップを中心とした放射状の画面遷移
- 各画面からゲームトップへの直接戻り
- 複雑な画面遷移を避けた直感的な設計

### 一貫したナビゲーション
- 各画面に「メニューに戻る」ボタンを配置
- 統一された戻り方でユーザビリティを向上
- 迷子になりにくい画面構成

### ゲームプレイの流れ
- タイトル → ゲームトップ → ゲームプレイ → 結果 → ゲームトップ
- シンプルで分かりやすいゲームループ
- 設定やヘルプへのアクセスが容易

## 技術実装

### Single Page Application (SPA) 構成
- **アプリケーションタイプ**: ReactベースのSPA
- **画面遷移**: ページリロードなしの高速な画面切り替え
- **状態保持**: 画面遷移時の状態を保持

### React Router による画面管理
- 各画面をRouteとして定義
- 画面遷移をプログラム的に制御
- ブラウザの戻るボタンとの連携

### 状態管理
- ゲームトップでの選択状態を管理
- 画面間でのデータ受け渡し
- プレイヤー情報の永続化

### アニメーション
- 画面遷移時のスムーズなアニメーション
- フェードイン・アウト効果
- スライド効果による視覚的な遷移

## ショートカットキー制限事項

### 制限の理由
- ゲームプレイ中の操作性を最優先とする
- 不要なショートカットキーは操作の邪魔になる可能性がある
- ユーザーの混乱を避けるため、最小限のショートカットに限定

### 制限内容
- **禁止**: 新たなキーボードショートカットの実装
- **対象**: ESC、S、H等の一般的なショートカットキー
- **例外**: F1（ヘルプ）とメニュー選択用の矢印キーのみ許可
- **方針**: マウス・タッチ操作を基本とし、キーボード操作は補助的な位置づけ