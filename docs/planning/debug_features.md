# BubblePop デバッグ機能

## 概要
このドキュメントでは、開発・デバッグ・動作確認用の機能について説明します。通常のゲームフローとは別のデバッグ用URLを提供し、各画面に直接アクセスできるようにします。

## デバッグ機能の目的
- **開発効率の向上**: 特定画面のテストを素早く実行
- **動作確認の簡素化**: ゲームフローを経由せずに画面を確認
- **デバッグ作業の効率化**: 問題のある画面への直接アクセス
- **UI/UXテスト**: 各画面の独立したテスト実行

## デバッグ用URL構成

### 基本構造
デバッグ用の機能は、ゲームの通常のURLとは別のトップページURLを提供します。

```
デバッグ用トップページ
├─ ゲームプレイ画面
├─ 設定画面
├─ ヘルプ画面
├─ アカウント情報画面
└─ ショップ画面
```

### 各画面への直接アクセス
1. **仮トップページ → ゲームプレイ画面**
   - 目的: ゲームプレイの動作確認
   - 用途: ゲームロジックのテスト、パフォーマンス測定

2. **仮トップページ → 設定画面**
   - 目的: 設定機能の動作確認
   - 用途: 設定項目のテスト、UIの動作確認

3. **仮トップページ → ヘルプ画面**
   - 目的: ヘルプシステムの動作確認
   - 用途: ヘルプ内容の表示テスト、ナビゲーション確認

4. **仮トップページ → アカウント情報画面**
   - 目的: アカウント機能の動作確認
   - 用途: データ表示のテスト、統計情報の確認

5. **仮トップページ → ショップ画面**
   - 目的: ショップ機能の動作確認
   - 用途: アイテム表示のテスト、購入フローの確認

## 技術実装

### ビルド構成
- **通常ビルド**: ゲーム用のメインビルドファイル
- **デバッグビルド**: デバッグ機能を含む別のビルドファイル
- **分離管理**: デバッグコードとゲームコードの明確な分離

### ルーティング構成
```typescript
// デバッグ用ルーティング
const debugRoutes = [
  { path: '/debug', component: DebugTopPage },
  { path: '/debug/game', component: GamePlayScreen },
  { path: '/debug/settings', component: SettingsScreen },
  { path: '/debug/help', component: HelpScreen },
  { path: '/debug/account', component: AccountScreen },
  { path: '/debug/shop', component: ShopScreen }
];

// 通常のゲームルーティング（影響なし）
const gameRoutes = [
  { path: '/', component: TitleScreen },
  { path: '/top', component: GameTopPage },
  { path: '/game', component: GamePlayScreen },
  // ... 他のゲームルート
];
```

### デバッグ用コンポーネント
- **DebugTopPage**: デバッグ用のトップページ
- **DebugNavigation**: デバッグ用のナビゲーション
- **DebugWrapper**: デバッグ機能をラップするコンポーネント

## 開発環境での利用

### 開発サーバー起動
```bash
# 通常の開発サーバー
npm run dev

# デバッグ機能付き開発サーバー
npm run dev:debug
```

### ビルドコマンド
```bash
# 通常ビルド
npm run build

# デバッグビルド
npm run build:debug
```

### 環境変数
```bash
# .env.development
VITE_ENABLE_DEBUG=true
VITE_DEBUG_ROUTES=true

# .env.production
VITE_ENABLE_DEBUG=false
VITE_DEBUG_ROUTES=false
```

## セキュリティ・制限事項

### アクセス制限
- **開発中**: アクセス制限なし
- **本番環境**: デバッグ機能は無効化
- **環境変数**: 環境に応じた自動制御

### 注意事項
- デバッグ機能は開発・テスト目的でのみ使用
- 本番環境ではデバッグ機能を有効にしない
- デバッグ用URLは公開しない

## デバッグ機能の利点

### 開発効率
- **画面テストの高速化**: 特定画面への直接アクセス
- **問題の切り分け**: 画面単位での独立したテスト
- **UI/UX改善**: 各画面の独立した評価

### 品質向上
- **動作確認の徹底**: 全画面の個別テスト
- **バグの早期発見**: 画面固有の問題を素早く特定
- **ユーザビリティ向上**: 各画面の使いやすさを個別に検証

## 今後の拡張予定

### 追加予定機能
- **デバッグ用データ**: テスト用のプレイヤーデータ
- **パフォーマンス測定**: 各画面の読み込み時間測定
- **エラーシミュレーション**: 意図的なエラー状態の作成
- **ログ出力**: デバッグ情報の詳細ログ

### 開発ツール連携
- **React DevTools**: コンポーネント状態の確認
- **Redux DevTools**: 状態管理の可視化
- **Network Tab**: API通信の監視
- **Console**: エラーログの確認

## まとめ

デバッグ機能は、開発効率と品質向上を目的として提供されます。各画面への直接アクセスにより、ゲームフローを経由せずに画面単位でのテストが可能になり、開発・デバッグ作業が大幅に効率化されます。

本番環境では自動的に無効化されるため、セキュリティリスクはありません。開発中は積極的に活用し、高品質なゲームの開発に役立ててください。
