# BubblePop 開発手順

## 開発方針
- シンプルな箇条書きで段階的に開発
- 各段階で確認を取る
- 過渡期的な実装も許容
- 余計な機能は作らない
- 将来のための機能は用意しない
- 最適化は不要

## 開発手順

### Phase 1: プロジェクト基盤構築
1. **モノリポジトリ初期化**
   - Lerna設定
   - ルートpackage.json作成
   - 各パッケージのディレクトリ作成

2. **基本パッケージ作成**
   - bubblepop（メインアプリ）
   - ui-library（共通UI）
   - bubblepop-lib（共通ロジック）

3. **開発環境構築**
   - Vite設定
   - TypeScript設定
   - 基本的なビルド確認

### Phase 2: 最小限のUI基盤
4. **基本UIコンポーネント**
   - Button, Card, Container
   - 基本的なレイアウトコンポーネント
   - StoryBook設定

5. **ルーティング基盤**
   - React Router設定
   - 基本的なページ構造
   - 画面遷移の確認

6. **状態管理基盤**
   - Zustand設定
   - 基本的なストア構造
   - データ永続化（LocalStorage）

### Phase 3: メニュー画面実装
7. **タイトル画面**
   - シンプルなタイトル表示
   - ゲームスタートボタン
   - 画面遷移確認

8. **メインメニュー**
   - ナビゲーションメニュー
   - 各画面への遷移
   - 基本的なレイアウト

9. **設定画面**
   - 音量設定
   - 言語設定
   - 設定の保存・読み込み

### Phase 4: ゲーム基盤実装
10. **Phaser統合**
    - Phaserゲームインスタンス作成
    - React-Phaser統合
    - 基本的なゲームループ

11. **泡の基本実装**
    - 1種類の泡（通常泡のみ）
    - 基本的な描画
    - クリック判定

12. **基本的なゲームプレイ**
    - 泡の生成・削除
    - スコア計算
    - ゲーム終了条件

### Phase 5: ゲーム機能拡張
13. **泡の種類追加**
    - 石泡、鉄泡
    - 各泡の特性実装
    - HPシステム

14. **物理演算実装**
    - 重力、反発
    - 境界判定
    - 自然移動

15. **コンボシステム**
    - コンボ計算
    - 倍率適用
    - タイムアウト処理

### Phase 6: ステージシステム
16. **ステージ選択画面**
    - ステージ一覧表示
    - 解放状態管理
    - ステージ選択

17. **ステージ設定**
    - 難易度別設定
    - 泡の出現パターン
    - 制限時間

18. **結果画面**
    - スコア表示
    - 獲得AP表示
    - メニューに戻る

### Phase 7: 進歩システム
19. **レベルシステム**
    - 経験値計算
    - レベルアップ処理
    - レベル表示

20. **実績システム**
    - 基本的な実績
    - 進捗追跡
    - 実績通知

21. **AP・TAPシステム**
    - AP獲得・消費
    - TAP計算
    - 表示更新

### Phase 8: ショップシステム
22. **ショップ画面**
    - アイテム一覧
    - 価格表示
    - 購入ボタン

23. **アイテム効果**
    - スコア倍率
    - HP増加
    - 効果適用

24. **購入処理**
    - AP消費
    - アイテム追加
    - レベルアップ

### Phase 9: 音響・エフェクト
25. **音響システム**
    - BGM再生
    - 効果音
    - 音量制御

26. **視覚エフェクト**
    - パーティクル
    - 画面シェイク
    - アニメーション

27. **カーソルシステム**
    - ハンマーカーソル
    - クリックアニメーション
    - 視覚フィードバック

### Phase 10: 特殊泡・高度な機能
28. **特殊泡実装**
    - 虹色泡（ボーナスタイム）
    - 毒泡（ダメージ）
    - 回復泡（HP回復）

29. **呼吸・成長システム**
    - 泡のサイズ変化
    - 年齢システム
    - 破裂処理

30. **高度な物理演算**
    - 泡同士の衝突
    - 複雑な移動パターン
    - 境界反発の改善

### Phase 11: アカウント・統計
31. **アカウント画面**
    - プレイヤー情報表示
    - 統計データ
    - 進捗表示

32. **ヘルプ画面**
    - ゲーム説明
    - 操作方法
    - 泡の種類説明

33. **データ管理**
    - セーブデータ構造
    - バックアップ機能
    - データ整合性

### Phase 12: 最終調整・テスト
34. **バランス調整**
    - 難易度調整
    - スコア調整
    - アイテム価格調整

35. **エラー処理**
    - エラーハンドリング
    - 復旧処理
    - ログ出力

36. **最終テスト**
    - 全機能テスト
    - パフォーマンス確認
    - ブラウザ互換性

## 各段階での確認ポイント

### Phase 1-3: 基盤構築
- ビルドが正常に動作するか
- 画面遷移が正常に動作するか
- 基本的なUIが表示されるか

### Phase 4-6: ゲーム基盤
- 泡が表示されるか
- クリック判定が正常に動作するか
- スコア計算が正しいか
- ステージ選択が動作するか

### Phase 7-9: 機能拡張
- レベルアップが正常に動作するか
- 実績が正しく記録されるか
- ショップでアイテムが購入できるか
- 音響が正常に再生されるか

### Phase 10-12: 完成
- 特殊泡が正常に動作するか
- 物理演算が自然に見えるか
- 全体的なゲームバランスが適切か
- エラーが発生しないか

## 注意事項
- 各段階で動作確認を必ず行う
- 問題があれば前の段階に戻って修正
- 過渡期的な実装でも動作することを優先
- 完璧を求めず、動くものを優先
